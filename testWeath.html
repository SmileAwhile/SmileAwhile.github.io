<!DOCTYPE html>
<html>
<head>
    <title>Local Weather</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://use.fontawesome.com/fd99a43c1b.js"></script> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script> 

    <script type="text/javascript" src="https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyBHTJAao4UVbF1btqTUhmsZjia1zhMJpAU"><script>
  
    
    <!--
      <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBHTJAao4UVbF1btqTUhmsZjia1zhMJpAUY&callback=initMap"type="text/javascript"></script>
-->
    

<script>
  $(document).ready(function() {
      

      
      var lat;
      var lng;
      var fio;
      var weather;
      var wicon;
      var cels;
      var state = false;
      var map;
      var local;
      
      var options = {
          enableHighAccuracy: true,
          timeout: 5000,
          maximumAge: 0
      };
      
      function success(pos) {
          var crd = pos.coords;
          
          lat = crd.latitude;
          lng = crd.longitude;
          fio = "https://api.forecast.io/forecast/e63d1cacfd57ffbbc60227c7aaaed2e3/" + lat + "," + lng;
          map = "https://maps.googleapis.com/maps/api/geocode/json?latlng=+lat"+","+lng+"&key=AIzaSyBHTJAao4UVbF1btqTUhmsZjia1zhMJpAU"
          fiosi = "https://api.forecast.io/forecast/e63d1cacfd57ffbbc60227c7aaaed2e3/" + lat + "," + lng + "?units=si"; //units in C
          console.log("Your current position is: ");
          console.log("Latitude : " + crd.latitude);
          console.log("Logitutdue:" + crd.longitude);
          console.log("More or less " + crd.accuracy + " meters. ");
          
          
          
         $.getJSON(fio, function(json) {
            console.log("SUCCESS");
            $("#joke").html(JSON.stringify(json));

        })
        
        $.getJSON(fiosi, function(json) {
            console.log("SUCCES");
            $("#joke").html(JSON.stringify(json));
            })
            
        .done(function() { console.log( "second success" ); })
        .fail(function() { console.log( "error" ); })
        .always(function() { console.log( "complete" ); });
          
              $.ajax({
    url: fio,
    dataType: 'jsonp',
    success: function(results) {
        console.log(results);
        weather = results;
        console.log("weather: " + weather);
        console.log("weather.currently : " + weather.currently);
        console.log("weather.currently.temperature: " + weather.currently.temperature);
        console.log("stringify()");
        console.log("weather: " + JSON.stringify(weather));
        console.log("weather.currently : " + JSON.stringify(weather.currently));
        console.log("weather.currently.temperature: " + JSON.stringify(weather.currently.temperature));
        wicon = weather.currently.icon;
        
         $(".jokeCNT").html("<img src='http://icons-ak.wxug.com/i/c/k/"+wicon+".gif'></i><h1>" + JSON.stringify(weather.currently.temperature) + " F</h1>");
    }
              })
    


              $.ajax({
    url: fiosi,
    dataType: 'jsonp',
    success: function(results){
        console.log(results);
        cels = results;
        
    }
});

/*
            $.ajax({
  url: map,
  dataType: "jsonp",
  success: function (data) {
      console.log('here');
      console.log(data);
      local = data;
  }
});
*/
      });  
     
      
      function error(err) {
          if(failure.message.indexOf("Only secure origins are allowed") == 0) {
      // Secure Origin issue.
    }
          console.warn("ERROR(" + err.code + "): " + err.message);
      };
      
      navigator.geolocation.getCurrentPosition(success, error, options);





    $("#units").on("click", function(){
       
       if (state) {
            $(".jokeCNT").html("<img src='http://icons-ak.wxug.com/i/c/k/"+wicon+".gif'></i><h1>" + JSON.stringify(weather.currently.temperature) + " F</h1>");
            state = false;
       } else {
           $(".jokeCNT").html("<img src='http://icons-ak.wxug.com/i/c/k/"+wicon+".gif'></i><h1>" + JSON.stringify(cels.currently.temperature) + " C</h1>");
           state = true;
       }
        /*
                        $("div.ville").append("<div class='endroit'>" + location + " </div>"+
                                        "<div class='temp'>" + temp_c + " °C</div>"+
                                        "<div> Temp. ressentie : "+tempRessentie+" °C</div>"+
                                        "<div class='triangle'></div>"+
                                        "<div class='icone'><img src='http://icons-ak.wxug.com/i/c/k/"+wicon+".gif' alt='"+condition+"' title='"+condition+"'/></div>"+
                                        "<div class='condition'>"+condition+"</div>"+
                                        "<div>Vent : "+vent_kmh+" km/h</div>"+
                                        "<div>Rafales : "+rafales+" km/h</div>"+
                                        "<div>Visibilité : "+visibilite+" km</div>");
                }
        
        */
    //  $.getJSON("https://api.forecast.io/forecast/e63d1cacfd57ffbbc60227c7aaaed2e3/" + lat + "," + lng, function(json) {
  //      $("#joke").html(JSON.stringify(json));
      //});      
      //$.getJSON("https://api.forecast.io/forecast/e63d1cacfd57ffbbc60227c7aaaed2e3/" + lat + "," + lng, function(json) {          
    //     $("#joke").html(JSON.stringify(json));         
    //  });

    });
      


  });
</script>

    <style>
        body {
            background-color: cadetblue;
        }
        h1 {
   
        }
        .parent {
            position: relative;
        }
        .child {
            position: absolute;
            top: 50%;

        }
        .jokeCNT {
            background-color: aliceblue;
        }
        #getMessage {

        }
        .buttons {
            padding: 15px;
        }
        .icon {
            font-size: 40px;
        }
        .sign {
            color: aliceblue;
        }
    </style>
    
<body>    
<div class="container-fluid">
  <div class = "row text-center">
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      
  </div>
  <div id="data" class = "row text-center">
      
      
      <h1>yeah</h1>
      
      
  </div>
  <div class = "parent row text-center">
    <div class = "forecast child col-xs-12">
        <div class="row">
        <div class="col-xs-4">
            </div>
            <div class="jokeCNT col-xs-4">
              <h1 id="joke">click me</h1>
                <div class="buttons row">
                    <div class="col-xs-2"></div>
                    <div class="icon col-xs-2">
                        <a class="a" href="https://twitter.com/intent/tweet?"><i class="fa fa-twitter" aria-hidden="true"></i></a>
</div>
                    <div class="col-xs-4"></div>
                    <div class="col-xs-2">
              <button id = "getMessage" class = "btn btn-primary">Get Quote</button>
                    </div>
                    <div class="col-xs-2"></div>
                    
                </div>
                </div>
            <div class="col-xs-4">
                     </div>
            <div class="col-xs-12 sign"><p class="text-center">created by Corey</p></div>
            
        </div>
        <button id="units" class="btn btn-primary">Units</button>
    </div>
  </div>
</div>
    </body>
    </html>
